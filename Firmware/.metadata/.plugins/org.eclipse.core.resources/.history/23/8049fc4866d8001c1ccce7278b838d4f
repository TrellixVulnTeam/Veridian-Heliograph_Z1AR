/*
 *  GNSSPVT
 *
 *  Created on: May 20, 2022
 *  Author: Jackson-E15Gen3
 */

//Parsing stuff
uint8_t rx_buffer_[96];
struct {
	uint32_t itow = 0;
	uint16_t year = 0;
	uint8_t month = 0;
	uint8_t day = 0;
	uint8_t hour = 0;
	uint8_t min = 0;
	uint8_t sec = 0;
	uint8_t valid = 0;
	uint32_t tacc = 0;
	int32_t nano = 0;
	uint8_t fix = 0;
	uint8_t flags = 0;
	uint8_t flags2 = 0;
	uint8_t numsv = 0;
	int32_t lon_deg = 0;
	int32_t lat_deg = 0;
	int32_t height = 0;
	int32_t hmsl = 0;
	uint32_t hacc = 0;
	uint32_t vacc = 0;
	int32_t veln = 0;
	int32_t vele = 0;
	int32_t veld = 0;
	int32_t gspeed = 0;
	int32_t headmot = 0;
	uint32_t sacc = 0;
	uint32_t headacc = 0;
	uint16_t pdop = 0;
	uint8_t flags3 = 0;
	uint8_t reserved1[5] = { 0, 0, 0, 0, 0 };
	int32_t headveh = 0;
	int16_t magdec = 0;
	uint16_t magacc = 0;
} ubx_nav_pvt;
uint16_t Checksum(uint8_t *data, uint16_t len);

//Public Functions
void GNSS_Setup(enum GNSS_rate newRate) {

}

//Time
uint16_t GNSS_getYear() {
	return ubx_nav_pvt.year;
}
uint8_t GNSS_getMonth() {
	return ubx_nav_pvt.month;
}
uint8_t GNSS_getDay() {
	return ubx_nav_pvt.day;
}
uint8_t GNSS_getHour() {
	return ubx_nav_pvt.hour;
}
uint8_t GNSS_getMin() {
	return ubx_nav_pvt.min;
}
uint8_t GNSS_getSec() {
	return ubx_nav_pvt.sec;
}

//Location
double getLongitude_deg();
double getLatitude_deg();
double getMSLHeight_m();
double getHorizontalAccuracy_m();
double getGroundSpeed_kms();
double getMotionHeading_deg();

//Status
uint8_t getNumSatellites();
double getHorizontalAccuracy_m();
enum FixType getFixType();
bool isGnssFixOk();
bool isTimeFullyResolved();
